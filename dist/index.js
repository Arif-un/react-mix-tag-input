"use client";
"use strict";var v=Object.create;var c=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var D=(t,r)=>{for(var n in r)c(t,n,{get:r[n],enumerable:!0})},M=(t,r,n,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of L(r))!F.call(t,e)&&e!==n&&c(t,e,{get:()=>r[e],enumerable:!(o=H(r,e))||o.enumerable});return t};var s=(t,r,n)=>(n=t!=null?v(j(t)):{},M(r||!t||!t.__esModule?c(n,"default",{value:t,enumerable:!0}):n,t)),$=t=>M(c({},"__esModule",{value:!0}),t);var G={};D(G,{default:()=>B,editorValueToMixInputValue:()=>l,mixInputValueToEditorValue:()=>x});module.exports=$(G);var p=s(require("react"));function U(t){return typeof t=="object"&&t.type==="tag"}function W(t){return{type:"tag",attrs:{...t.attrs}}}function l(t){let r=[];return t.forEach(n=>{var o;n.type==="paragraph"&&(r.push([]),(o=n==null?void 0:n.content)==null||o.forEach(e=>{var u,d;e.type==="text"&&e.text&&((u=r.at(-1))==null||u.push(e.text)),e.type==="tag"&&((d=r.at(-1))==null||d.push(W(e)))}))}),r}function x(t){let r=[];return t.forEach((n,o)=>{Array.isArray(r[o])||r.push({type:"paragraph",content:[]});let e=r.at(-1);typeof n=="string"&&(e!=null&&e.content)&&e.content.push({type:"text",text:n}),!Array.isArray(n)&&U(n)&&(e!=null&&e.content)&&e.content.push({type:"tag",attrs:{...n.attrs}}),Array.isArray(n)&&n.forEach(u=>{typeof u=="string"&&(e!=null&&e.content)&&e.content.push({type:"text",text:u}),typeof u=="object"&&u.type==="tag"&&(e!=null&&e.content)&&e.content.push({type:"tag",attrs:{...u.attrs}})})}),r}var g=require("@tiptap/react"),N=s(require("@tiptap/extension-document")),A=s(require("@tiptap/extension-paragraph")),E=s(require("@tiptap/extension-text")),P=s(require("@tiptap/extension-placeholder"));var m=require("@tiptap/core"),b=require("@tiptap/react");var T=require("@tiptap/react"),f=s(require("react"));function y(t){let{tagView:r,tagClassName:n}=t.extension.options,{label:o,...e}=t.node.attrs;return f.default.createElement(f.default.Fragment,null,f.default.createElement(T.NodeViewWrapper,{className:`mi-tag ${n||""}`,"data-type":"tag",as:"span"},r?r(t):f.default.createElement("span",{...e},o)),"\u200B")}var I=m.Node.create({name:"tag",group:"inline",inline:!0,atom:!0,selectable:!1,parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({HTMLAttributes:t}){return["span",(0,m.mergeAttributes)(t)]},addNodeView(){return(0,b.ReactNodeViewRenderer)(y)},addAttributes(){let t={};for(let r in this.options.attrs)t[r]={default:this.options.attrs[r]};return t}});var _={id:void 0,label:"undefined",className:void 0,style:void 0},z=(0,p.forwardRef)((t,r)=>{let{onChange:n,value:o,placeholder:e,readonly:u=!1,tagClassName:d,editorOptions:O,className:R,tagAttrs:C,tagView:S,...J}=t,h=(0,p.useRef)(null),a=(0,g.useEditor)({editorProps:{attributes:{class:`mix-input ${R||""}`}},extensions:[N.default,A.default.configure({HTMLAttributes:{class:"mi-paragraph"}}),E.default,P.default.configure({placeholder:e}),I.configure({tagClassName:d,attrs:{..._,...C},tagView:S})],onUpdate:({editor:i})=>{var V;n==null||n(l(((V=i==null?void 0:i.getJSON())==null?void 0:V.content)||[]))},...O}),k=i=>{a==null||a.chain().focus().insertContent(i).run()};return(0,p.useEffect)(()=>{let i=x(o);i.length===0&&(i=[{type:"paragraph"}]),JSON.stringify(i)!==JSON.stringify(a==null?void 0:a.getJSON().content)&&(a==null||a.commands.setContent(i))},[o]),(0,p.useImperativeHandle)(r,()=>({element:h.current,editor:a,insertContent:k})),p.default.createElement(g.EditorContent,{editor:a,innerRef:h,...J})}),w=z;var B=w;0&&(module.exports={editorValueToMixInputValue,mixInputValueToEditorValue});
//# sourceMappingURL=index.js.map